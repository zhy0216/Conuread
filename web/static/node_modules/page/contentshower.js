var $ = require("jquery");
var signal = require('signal').createSignal();

var ContentShower = function(){
    var self= this;



    this.init = function(){
        console.log("start contentshower");
        this.bindEvent();
    }


    this.bindEvent = function(){
        $(document).on("click", 
                       ".article-controller .star .glyphicon-star-empty", 
                       function(){
            var $this = $(this);
            self.toggleStar($this);

            var articleid = $this.closest("[articleid]").attr("articleid");
            signal.publish('test')();

        });

        $(document).on("click", 
                       ".article-controller .star .glyphicon-star", 
                       function(){
            var $this = $(this);
            self.toggleStar($this);

            var articleid = $this.closest("[articleid]").attr("articleid");
            console.log("articleid" + articleid);
        });

        // $(document).on("mouseenter mouseleave", ".article-controller .star .glyphicon", function(){
        //     console.log("hover");
        //     self.toggleStar($(this));
        // })
    }


    this.toggleStar = function(dom){
        if(dom.hasClass("glyphicon-star")){
            dom.removeClass("glyphicon-star")
               .addClass("glyphicon-star-empty");
        }else{
            dom.removeClass("glyphicon-star-empty")
               .addClass("glyphicon-star");
        }
    }


}

exports.ContentShower = ContentShower;
